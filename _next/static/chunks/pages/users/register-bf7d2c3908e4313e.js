(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1342],{9970:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/register",function(){return t(6028)}])},8998:function(e,r,t){"use strict";t(5893),t(1294)},6028:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b}});var n=t(5893);t(8998);var o=t(2347),i=t.n(o),s=t(1963),a=t(1794);t(1955);var l=t(9008),c=t.n(l),_=t(1664),u=t.n(_),g=t(1163),m=t(5342),d=t(4420),p=t(7294),f=t(3977),h=t(2370),y=t(5675),j=t.n(y),x=t(1294),w=t.n(x),N=t(9403),v=()=>{let e=(0,f.ZF)({apiKey:"AIzaSyDx_dviqCLZGqXXdLDF5EFjdOJiXROc5mo",authDomain:"test-ce224.firebaseapp.com",projectId:"test-ce224",storageBucket:"test-ce224.appspot.com",messagingSenderId:"758626351874",appId:"1:758626351874:web:4e0e954eb74dde33c3a01b",measurementId:"G-9B4HNZLJ79"});return(0,n.jsxs)(N.z,{className:w().button_container,onClick:()=>{let r=new h.hJ;r.addScope("https://www.googleapis.com/auth/contacts.readonly");let t=(0,h.v0)(e);t.languageCode="fr",r.setCustomParameters({login_hint:"user@example.com"}),(0,h.rh)(t,r).then(e=>{let r=h.hJ.credentialFromResult(e);r&&r.accessToken;let t=e.user;localStorage.setItem("user_register_info",JSON.stringify(t)),window.location.href="/users/register/create-password"}).catch(e=>{var r;let t=e.code,n=e.message,o=null===(r=e.customData)||void 0===r?void 0:r.email,i=h.hJ.credentialFromError(e);console.error("Error Code: ",t),console.error("Error Message: ",n),console.error("Email: ",o),console.error("Credential: ",i)})},children:[(0,n.jsx)(j(),{imageClassName:w().image_google,width:25,height:25,alt:"G",src:"/images/google.png"}),"Signup with Google"]})},k=t(2013);function b(){let e=(0,g.useRouter)(),r=(0,p.useRef)(null),[t,o]=(0,p.useState)(""),l=(0,p.useRef)(null),[c,_]=(0,p.useState)(null),f=async t=>{try{let r=await (0,s.Vt)();if(!(await fetch("".concat(k.F.apiBaseUrl,"/api/accounts/send-verification-code/"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify({email:t})})).ok)throw Error("Failed to send verification email.");e.push("/users/register/verify-email")}catch(e){r.current.show({severity:"error",summary:"Error",detail:"Failed to send verification email. Please try again later.",life:5e3})}},h=async e=>{let o=await (0,s.Vt)();try{let e=await fetch("".concat(k.F.apiBaseUrl,"/api/accounts/client/check-email/"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify({email:t})});if(!e.ok)throw Error("Network response was not ok.");(await e.json()).exists?r.current.show({severity:"info",summary:"Info",detail:(0,n.jsxs)(n.Fragment,{children:["Email already exists. ",(0,n.jsx)(u(),{href:"/users/login",children:"Login here"}),"."]}),life:5e3}):await f(t)}catch(e){r.current.show({severity:"error",summary:"Error",detail:"An error occurred. Please try again later.",life:5e3}),console.log(e)}},y=async e=>{e.preventDefault();let r=!0;""!=t.trim()&&(0,a.s)(t)||(l.current.className=i().form_input_erreur,_("Email required"),r=!1),r&&(sessionStorage.setItem("email_in_signup",t),await h())};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:i().container,children:[(0,n.jsx)("div",{className:i().login_left,children:(0,n.jsx)(u(),{href:"/users",children:(0,n.jsx)(m.E,{src:"/images/logo-aftrip.png",alt:"logo",style:{width:"250px"}})})}),(0,n.jsxs)("div",{className:i().login_right,children:[(0,n.jsxs)("div",{className:i().login_title_container,children:[(0,n.jsx)("span",{className:i().login_title,children:"Sign up"}),(0,n.jsx)("span",{className:i().login_title_label,children:"Welcome ! Please enter your details"})]}),(0,n.jsx)(v,{}),(0,n.jsxs)("div",{className:i().separateur_container,children:[(0,n.jsx)("div",{className:i().separateur}),(0,n.jsx)("span",{children:"or"}),(0,n.jsx)("div",{className:i().separateur})]}),(0,n.jsxs)("div",{className:i().content,children:[(0,n.jsxs)("form",{onSubmit:y,className:i().form,children:[(0,n.jsxs)("div",{className:i().form_group,children:[(0,n.jsxs)("div",{className:i().form_group_input,children:[(0,n.jsx)("span",{className:i().form_label,children:"Email"}),(0,n.jsx)("input",{ref:l,type:"email",autoFocus:!0,className:i().form_input,placeholder:"Enter your email",value:t,onChange:e=>{l.current.className=i().form_input,o(e.target.value),_(null)}}),(0,n.jsx)(m.E,{style:null!=c?{display:"block"}:{display:"none"},className:i().form_erreur_image,src:"/images/auth/alert_circle.svg",alt:"!"})]}),(0,n.jsx)("span",{style:null!=c?{display:"block"}:{display:"none"},className:i().form_erreur,children:c})]}),(0,n.jsx)("div",{className:i().button_group,children:(0,n.jsx)("button",{type:"submit",className:i().login_button,children:"Sign up"})})]}),(0,n.jsxs)("div",{className:i().register_component,children:[(0,n.jsx)("span",{className:i().register_label,children:"You have alerady an account, "}),(0,n.jsx)(u(),{className:i().register_link,href:"/users/login",children:"Sign in"})]})]})]}),(0,n.jsxs)("div",{className:i().footer,children:[(0,n.jsx)("span",{children:"Copyright 2024 - All rights reserved"}),(0,n.jsx)(u(),{style:{color:"#000"},href:"/users/privatePolicy",children:"Pivate policy"})]})]}),(0,n.jsx)(d.F,{ref:r})]})}b.getLayout=function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c(),{children:(0,n.jsx)("title",{children:"Register"})}),e]})}},2013:function(e,r,t){"use strict";t.d(r,{F:function(){return n}});let n={apiBaseUrl:"http://192.168.88.37:8000",adminUrl:"/admin"}},1963:function(e,r,t){"use strict";t.d(r,{Vt:function(){return s},vT:function(){return i}});var n=t(1955),o=t(2013);let i=async(e,r)=>{let t="".concat(o.F.apiBaseUrl,"/api/token/"),i=await s();try{let o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":i},body:JSON.stringify({username:e,password:r})});if(!o.ok)throw Error("HTTP error! Status: ".concat(o.status));let s=await o.json();return console.log(s),s.access&&n.Z.set("access_token",s.access,{expires:7,secure:!0,sameSite:"strict"}),s.refresh&&n.Z.set("refresh_token",s.refresh,{expires:30,secure:!0,sameSite:"strict"}),s}catch(e){throw console.error("Error fetching data:",e),e}},s=async()=>{try{let e=await fetch("".concat(o.F.apiBaseUrl,"/api/get-csrf-token-direct/"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to get CSRF token");return(await e.json()).csrfToken}catch(e){throw console.error("Error fetching CSRF token:",e.message),e}}},1794:function(e,r,t){"use strict";t.d(r,{s:function(){return n}});let n=e=>/^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$/.test(e)},1294:function(e){e.exports={button_container:"GoogleButton_button_container___kqrN",image_google:"GoogleButton_image_google__SNlbI"}},2347:function(e){e.exports={container:"login_container__QxMsj",footer:"login_footer__7U2NE",separateur_container:"login_separateur_container__YG2w4",separateur:"login_separateur__rTk29",login_left:"login_login_left__u8XC8",login_right:"login_login_right__AykJp",login_title:"login_login_title__GuFSk",login_title_container:"login_login_title_container__qjuVs",login_title_label:"login_login_title_label__Eh0y7",logo:"login_logo__1jLz5",content:"login_content__QBi7I",form:"login_form__Y_Qx_",form_group:"login_form_group__MnWGC",form_group_input:"login_form_group_input__fp4La",form_label:"login_form_label__e4Jy5",form_input:"login_form_input__HLtl0",form_input_password_container:"login_form_input_password_container__VRloI",form_input_password:"login_form_input_password__ufy9s",form_erreur_image:"login_form_erreur_image__6v8T_",form_erreur:"login_form_erreur__hoZt_",form_input_erreur:"login_form_input_erreur__i35mE",link_forgot_container:"login_link_forgot_container__FK0Wl",link_forgot:"login_link_forgot__41zly",button_group:"login_button_group__qOnVS",login_button:"login_login_button__trQin",resend_button:"login_resend_button__bYjEk",timer:"login_timer__Br_81",register_component:"login_register_component__X94J0",register_link:"login_register_link__sK644"}}},function(e){e.O(0,[7724,5342,4420,2335,2888,9774,179],function(){return e(e.s=9970)}),_N_E=e.O()}]);